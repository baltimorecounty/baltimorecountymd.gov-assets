/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.3.2 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE
 */
var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var i;for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}}function eachReverse(e,t){if(e){var i;for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,r){return t&&eachProp(t,function(t,n){!i&&hasProp(e,n)||(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[n]=t:(e[n]||(e[n]={}),mixin(e[n],t,i,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,r){var n=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return n.requireType=e,n.requireModules=r,i&&(n.originalError=i),n}function newContext(e){function t(e){var t,i;for(t=0;t<e.length;t++)if(i=e[t],"."===i)e.splice(t,1),t-=1;else if(".."===i){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function i(e,i,r){var n,o,a,s,u,c,d,p,f,l,h,m,g=i&&i.split("/"),v=y.map,x=v&&v["*"];if(e&&(e=e.split("/"),d=e.length-1,y.nodeIdCompat&&jsSuffixRegExp.test(e[d])&&(e[d]=e[d].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&g&&(m=g.slice(0,g.length-1),e=m.concat(e)),t(e),e=e.join("/")),r&&v&&(g||x)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(c=a.slice(0,s).join("/"),g)for(u=g.length;u>0;u-=1)if(o=getOwn(v,g.slice(0,u).join("/")),o&&(o=getOwn(o,c))){p=o,f=s;break e}!l&&x&&getOwn(x,c)&&(l=getOwn(x,c),h=s)}!p&&l&&(p=l,f=h),p&&(a.splice(0,f,p),e=a.join("/"))}return n=getOwn(y.pkgs,e),n?n:e}function r(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===q.contextName)return t.parentNode.removeChild(t),!0})}function n(e){var t=getOwn(y.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),q.require.undef(e),q.makeRequire(null,{skipMap:!0})([e]),!0}function o(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function a(e,t,r,n){var a,s,u,c,d=null,p=t?t.name:null,f=e,l=!0,h="";return e||(l=!1,e="_@r"+(T+=1)),c=o(e),d=c[0],e=c[1],d&&(d=i(d,p,n),s=getOwn(j,d)),e&&(d?h=s&&s.normalize?s.normalize(e,function(e){return i(e,p,n)}):e.indexOf("!")===-1?i(e,p,n):e:(h=i(e,p,n),c=o(h),d=c[0],h=c[1],r=!0,a=q.nameToUrl(h))),u=!d||s||r?"":"_unnormalized"+(A+=1),{prefix:d,name:h,parentMap:t,unnormalized:!!u,url:a,originalName:f,isDefine:l,id:(d?d+"!"+h:h)+u}}function s(e){var t=e.id,i=getOwn(S,t);return i||(i=S[t]=new q.Module(e)),i}function u(e,t,i){var r=e.id,n=getOwn(S,r);!hasProp(j,r)||n&&!n.defineEmitComplete?(n=s(e),n.error&&"error"===t?i(n.error):n.on(t,i)):"defined"===t&&i(j[r])}function c(e,t){var i=e.requireModules,r=!1;t?t(e):(each(i,function(t){var i=getOwn(S,t);i&&(i.error=e,i.events.error&&(r=!0,i.emit("error",e)))}),r||req.onError(e))}function d(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(q.defQueueMap[t]=!0),O.push(e)}),globalDefQueue=[])}function p(e){delete S[e],delete k[e]}function f(e,t,i){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,n){var o=r.id,a=getOwn(S,o);!a||e.depMatched[n]||i[o]||(getOwn(t,o)?(e.defineDep(n,j[o]),e.check()):f(a,t,i))}),i[r]=!0)}function l(){var e,t,i=1e3*y.waitSeconds,o=i&&q.startTime+i<(new Date).getTime(),a=[],s=[],u=!1,d=!0;if(!x){if(x=!0,eachProp(k,function(e){var i=e.map,c=i.id;if(e.enabled&&(i.isDefine||s.push(e),!e.error))if(!e.inited&&o)n(c)?(t=!0,u=!0):(a.push(c),r(c));else if(!e.inited&&e.fetched&&i.isDefine&&(u=!0,!i.prefix))return d=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=q.contextName,c(e);d&&each(s,function(e){f(e,{},{})}),o&&!t||!u||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,l()},50)),x=!1}}function h(e){hasProp(j,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function m(e,t,i,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(i,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,q.onScriptLoad,"load","onreadystatechange"),m(t,q.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(d();O.length;){if(e=O.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}q.defQueueMap={}}var x,b,q,E,w,y={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},S={},k={},M={},O=[],j={},P={},R={},T=1,A=1;return E={require:function(e){return e.require?e.require:e.require=q.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?j[e.map.id]=e.exports:e.exports=j[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(y.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},b=function(e){this.events=getOwn(M,e.id)||{},this.map=e,this.shim=getOwn(y.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,i,r){r=r||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,q.startTime=(new Date).getTime();var e=this.map;return this.shim?void q.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,q.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id,r=this.depExports,n=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{n=q.execCb(i,o,r,n)}catch(t){e=t}else n=q.execCb(i,o,r,n);if(this.map.isDefine&&void 0===n&&(t=this.module,t?n=t.exports:this.usingExports&&(n=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else n=o;if(this.exports=n,this.map.isDefine&&!this.ignore&&(j[i]=n,req.onResourceLoad)){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(q,this.map,a)}p(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(q.defQueueMap,i)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),u(r,"defined",bind(this,function(r){var n,o,d,f=getOwn(R,this.map.id),l=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,m=q.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(l=r.normalize(l,function(e){return i(e,h,!0)})||""),o=a(e.prefix+"!"+l,this.map.parentMap),u(o,"defined",bind(this,function(e){this.map.normalizedMap=o,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),d=getOwn(S,o.id),void(d&&(this.depMaps.push(o),this.events.error&&d.on("error",bind(this,function(e){this.emit("error",e)})),d.enable()))):f?(this.map.url=q.nameToUrl(f),void this.load()):(n=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),n.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(S,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&p(e.map.id)}),c(e)}),n.fromText=bind(this,function(i,r){var o=e.name,u=a(o),d=useInteractive;r&&(i=r),d&&(useInteractive=!1),s(u),hasProp(y.config,t)&&(y.config[o]=y.config[t]);try{req.exec(i)}catch(e){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}d&&(useInteractive=!0),this.depMaps.push(u),q.completeLoad(o),m([o],n)}),void r.load(e.name,m,n,y))})),q.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){k[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,r,n;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,n=getOwn(E,e.id))return void(this.depExports[t]=n(this));this.depCount+=1,u(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?u(e,"error",bind(this,this.errback)):this.events.error&&u(e,"error",bind(this,function(e){this.emit("error",e)}))}i=e.id,r=S[i],hasProp(E,i)||!r||r.enabled||q.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(S,e.id);t&&!t.enabled&&q.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},q={config:y,contextName:e,registry:S,defined:j,urlFetched:P,defQueue:O,defQueueMap:{},Module:b,makeModuleMap:a,nextTick:req.nextTick,onError:c,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,i){return(i.indexOf("?")===-1?"?":"&")+t}}var i=y.shim,r={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?(y[t]||(y[t]={}),mixin(y[t],e,!0,!0)):y[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(R[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=q.makeShimExports(e)),i[t]=e}),y.shim=i),e.packages&&each(e.packages,function(e){var t,i;e="string"==typeof e?{name:e}:e,i=e.name,t=e.location,t&&(y.paths[i]=e.location),y.pkgs[i]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(S,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&q.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function o(i,r,u){var d,p,f;return n.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof i?isFunction(r)?c(makeError("requireargs","Invalid require call"),u):t&&hasProp(E,i)?E[i](S[t.id]):req.get?req.get(q,i,t,o):(p=a(i,t,!1,!0),d=p.id,hasProp(j,d)?j[d]:c(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),q.nextTick(function(){v(),f=s(a(null,t)),f.skipMap=n.skipMap,f.init(i,r,u,{enabled:!0}),l()}),o)}return n=n||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,n=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return n!==-1&&(!a||n>1)&&(r=e.substring(n,e.length),e=e.substring(0,n)),q.nameToUrl(i(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(j,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(j,e)||hasProp(S,e)}}),t||(o.undef=function(e){d();var i=a(e,t,!0),n=getOwn(S,e);n.undefed=!0,r(e),delete j[e],delete P[i.url],delete M[e],eachReverse(O,function(t,i){t[0]===e&&O.splice(i,1)}),delete q.defQueueMap[e],n&&(n.events.defined&&(M[e]=n.events),p(e))}),o},enable:function(e){var t=getOwn(S,e.id);t&&s(e).enable()},completeLoad:function(e){var t,i,r,o=getOwn(y.shim,e)||{},a=o.exports;for(d();O.length;){if(i=O.shift(),null===i[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);h(i)}if(q.defQueueMap={},r=getOwn(S,e),!t&&!hasProp(j,e)&&r&&!r.inited){if(!(!y.enforceDefine||a&&getGlobal(a)))return n(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));h([e,o.deps||[],o.exportsFn])}l()},nameToUrl:function(e,t,i){var r,n,o,a,s,u,c,d=getOwn(y.pkgs,e);if(d&&(e=d),c=getOwn(R,e))return q.nameToUrl(c,t,i);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(r=y.paths,n=e.split("/"),o=n.length;o>0;o-=1)if(a=n.slice(0,o).join("/"),u=getOwn(r,a)){isArray(u)&&(u=u[0]),n.splice(0,o,u);break}s=n.join("/"),s+=t||(/^data\:|^blob\:|\?/.test(s)||i?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":y.baseUrl)+s}return y.urlArgs&&!/^blob\:/.test(s)?s+y.urlArgs(e,s):s},load:function(e,t){req.load(q,e,t)},execCb:function(e,t,i,r){return t.apply(r,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);q.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);if(!n(t.id)){var i=[];return eachProp(S,function(e,r){0!==r.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return i.push(r),!0})}),c(makeError("scripterror",'Script error for "'+t.id+(i.length?'", needed by: '+i.join(", "):'"'),e,[t.id]))}}},q.require=q.makeRequire(),q}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.2",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,r){var n,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=i,i=r):e=[]),o&&o.context&&(a=o.context),n=getOwn(contexts,a),n||(n=contexts[a]=req.s.newContext(a)),o&&n.configure(o),n.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,i){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,i){var r,n=e&&e.config||{};if(isBrowser)return r=req.createNode(n,t,i),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=i,n.onNodeCreated&&n.onNodeCreated(r,n,t,i),currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{setTimeout(function(){},0),importScripts(i),e.completeLoad(t)}catch(r){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,r,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||mainScript.indexOf("!")!==-1||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,i){var r,n;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),n=contexts[r.getAttribute("data-requirecontext")])),n?(n.defQueue.push([e,t,i]),n.defQueueMap[e]=!0):globalDefQueue.push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout);
// Production steps of ECMA-262, Edition 5, 15.4.4.17
// Reference: http://es5.github.io/#x15.4.4.17
if (!Array.prototype.some) {
  Array.prototype.some = function(fun/*, thisArg*/) {
    'use strict';

    if (this == null) {
      throw new TypeError('Array.prototype.some called on null or undefined');
    }

    if (typeof fun !== 'function') {
      throw new TypeError();
    }

    var t = Object(this);
    var len = t.length >>> 0;

    var thisArg = arguments.length >= 2 ? arguments[1] : void 0;
    for (var i = 0; i < len; i++) {
      if (i in t && fun.call(thisArg, t[i], i, t)) {
        return true;
      }
    }

    return false;
  };
}
/*
 * Creates namespaces safely and conveniently, reusing 
 * existing objects instead of overwriting them.
 */ 
function namespacer(ns) {
	var nsArr = ns.split('.'),
		parent = window;
	
	if (!nsArr.length)
		return;

	for (var i = 0; i < nsArr.length; i++) {
		var nsPart = nsArr[i];

		if (typeof parent[nsPart] === 'undefined') {
			parent[nsPart] = {};
		}

		parent = parent[nsPart];
	}
}
namespacer('baltimoreCounty.utility');

baltimoreCounty.utility.cdnFallback = (function() {

    /*
     * This is to be used after your CDN call, and will load a local script if the 
     * CDN fails. Which never happens.
     * 
     * obj: The object to test for. You can pass in a string or the object itself.
     * path: The path to the local copy of the script file.
     * isHead: Indication of whether to load the script in the head or the body.
     */
    var load = function(obj, path, isHead) {
        var exists = typeof obj === 'string' ? window[obj] : obj;

        if (!exists)
            createScriptTag(path, isHead);
    },

    /*
     * Actual script tag creation. The tag iself will be added aboce the 
     * closing head or body tag.
     * 
     * path: Path to the local copy of the script.
     * isHead: Indication of whether to load the script in the head or the body.
     */
    createScriptTag = function(path, isHead) {
        var scriptTag = document.createElement('script');
        scriptTag.src = path;

        if (isHead)
            document.getElementsByTagName('head')[0].appendChild(scriptTag);
        else 
            document.getElementsByTagName('body')[0].appendChild(scriptTag);
    };

    return { 
        load: load
    };

})();
(function($) {
        // bind a click event to the 'skip' link
        $(document).on('click', '.skip', function(event){
    
            // strip the leading hash and declare
            // the content we're skipping to
            var skipTo="#"+this.href.split('#')[1];
    
            // Setting 'tabindex' to -1 takes an element out of normal 
            // tab flow but allows it to be focused via javascript
            $(skipTo).attr('tabindex', -1).on('blur focusout', function () {
    
                // when focus leaves this element, 
                // remove the tabindex attribute
                $(this).removeAttr('tabindex');
    
            }).focus(); // focus on the content container
        });
})(jQuery);
var TextResizer = (function (window, undefined, $) {
    var TextResizer = function (options) {
        this.listClass = options.listClass || "text-resizer";
        this.normalBtnId = options.normalBtnId || "normal-text";
        this.largeBtnId = options.largeBtnId || "large-text";
        this.largestBtnId = options.largestBtnId || "largest-text";
        this.mainContainerId = options.mainContainerId || "main-content";

        var largeTextClass = 'large-text',
            largestTextClass = 'largest-text',
            $textButtonList = $('.' + this.listClass),
            $mainContainer = $("#" + this.mainContainerId),
            existsLocalStorage = typeof (Storage) !== "undefined",
            activeClass = 'active';

        var getPreference = function () {
            return existsLocalStorage && localStorage.getItem("size");
        },
        initialize = function () {
            var preference = getPreference();
            if (!preference) {
                preference = "normal-text";
            }

            $textButtonList.find("#" + preference).addClass(activeClass);
            $mainContainer.addClass(preference);
        },
        removePreference = function () {
            localStorage.removeItem("size");
        },
        savePreference = function (size) {
            if (existsLocalStorage) {
                localStorage.setItem("size", size);
            }
        };

        $(document).on('click', $textButtonList.selector + " button", function() {
            $textButtonList.find("button").removeClass(activeClass);
            $(this).addClass(activeClass);
        });

        /*Text Resizer Events*/
        $(document).on('click', '#' + this.normalBtnId, function (e) {
            e.preventDefault();
            
            $mainContainer.removeClass(largeTextClass + " " + largestTextClass);
            
            removePreference();
        });

        $(document).on('click', '#' + this.largeBtnId, function (e) {
            e.preventDefault();

            $mainContainer.removeClass(largestTextClass)
                .addClass(largeTextClass);

            savePreference(largeTextClass);
        });

        $(document).on('click', '#' + this.largestBtnId, function (e) {
            e.preventDefault();

            $mainContainer.removeClass(largeTextClass)
                .addClass(largestTextClass);

            savePreference(largestTextClass);
        });

        initialize();

    };

    return TextResizer;
})(window, undefined, jQuery);
(function() {
    /*Initialize teh Text Resizer*/
    var textResizer = new TextResizer({
        listClass: "resizer-list"
    });   
})();
(function () {
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-716612-1', 'auto');
    ga('send', 'pageview');
})();

(function($) {
    var sendGoogleEvent = function(desc, act) {
        act = act || 'click';
        ga('send', 'event', 'button', act, desc);
    };

    /*Event handling*/
    //Search Button
    $(document).on('click', '.search-button', function() {
        sendGoogleEvent('search-button');
    });
    //Search Result
    $(document).on('click', '.gsc-table-result div.gs-title a.gs-title', function() {
        sendGoogleEvent('search-result');
    });
})(jQuery);
    
function isIE(userAgent) {
  userAgent = userAgent || navigator.userAgent;
  return userAgent.indexOf("MSIE ") > -1 || userAgent.indexOf("Trident/") > -1;
}

/*
ReView.js 0.65b. The Responsive Viewport. responsiveviewport.com.
Developed by Edward Cant. @opticswerve.
*/
if(!isIE()) {
	function Viewport(){this.viewport=function(a){var b=document,d=b.documentElement;b.head=b.head||b.getElementsByTagName("head")[0];var e=screen,c=this,f=window;c.bScaled=!1;c.bSupported=!0;b.addEventListener===a?c.bSupported=!1:b.querySelector===a?c.bSupported=!1:f!==parent?c.bSupported=!1:f.orientation===a&&(c.bSupported=!1);c.updateOrientation();c.updateScreen();c.dpr=1;var g=f.devicePixelRatio;g===a?c.bSupported=!1:c.dpr=g;c.fromHead();this.meta!==a&&(c.iHeight=c.height,c.iMaxScale=c.maxScale,c.iMinScale=
c.minScale,c.iUserScalable=c.bUserScalable,c.iWidth=c.width);c.defaultWidth=1200;e.width>c.defaultWidth&&(c.defaultWidth=e.width);e.height>c.defaultWidth&&(c.defaultWidth=e.height);c.ready(function(){if(c.bSupported){if(f.screenX!==0)c.bSupported=false;else if(c.width!==a){var e;if(d.offsetHeight<=d.clientHeight){e=d.style.height;d.style.height=d.clientHeight+128+"px"}if(c.width==="device-width"){if(d.clientWidth!==c.screenWidth)c.bSupported=false}else if(c.width!==d.clientWidth)c.bSupported=false;
e===""?d.style.height="auto":e!==a&&(d.style.height=e)}if(c.bSupported){b.addEventListener("touchend",function(){var b=(new Date).getTime();if(c.lastTouch!==a&&b-c.lastTouch<500&&c.bUserScalable===true)c.bScaled=true;c.lastTouch=b},false);b.addEventListener("gestureend",function(a){if(a.scale!==1&&c.bUserScalable===true)c.bScaled=true},false);b.addEventListener("resize",function(){c.updateCheck()},false);b.addEventListener("orientationchange",function(){var b=c.orientation;c.updateOrientation();if(b!==
c.orientation){c.updateScreen();if(c.bUserScalable===true)c.bScaled=true;c.orientationChangePolicy!==a&&c.orientationChangePolicy()}},false)}}c.readyPolicy!==a&&c.readyPolicy()})};this.fromContentString=function(a){for(var a=a.split(","),b,d,e=0;e<a.length;e++)b=a[e].split("="),2===b.length&&(d=b[0].trim(),b=b[1].trim(),isNaN(parseFloat(b))||(b=parseFloat(b)),"width"===d?this.width=b:"height"===d?this.height=b:"initial-scale"===d?this.initialScale=b:"maximum-scale"===d?this.maxScale=b:"minimum-scale"===
d?this.minScale=b:"user-scalable"===d&&(this.bUserScalable="no"===b?!1:!0))};this.fromHead=function(){var a=this.meta=document.head.querySelector("meta[name=viewport]");null===a?this.meta=void 0:a.hasAttribute("content")&&this.fromContentString(a.getAttribute("content"))};this.ready=function(a){var b=document;b.addEventListener&&b.addEventListener("DOMContentLoaded",function(){b.removeEventListener("DOMContentLoaded",arguments.callee,!1);a()},!1)};this.setDefault=function(a,b){this.bUserScalable=
!0;this.height=void 0;this.maxScale=5;this.minScale=0.25;this.width=this.defaultWidth;this.update(a,b)};this.setMobile=function(a,b){this.bScaled?b():(void 0===this.iWidth?(this.bUserScalable=!1,this.height=void 0,this.minScale=this.maxScale=1,this.width="device-width"):(this.bUserScalable=this.iUserScalable,this.height=this.iHeight,this.maxScale=this.iMaxScale,this.minScale=this.iMinScale,this.width=this.iWidth),this.update(a,b))};this.toString=function(){var a="";void 0!==this.width&&(a+="width="+
this.width+", ");void 0!==this.height&&(a+="height="+this.height+", ");void 0!==this.maxScale&&(a+="maximum-scale="+this.maxScale+", ");void 0!==this.minScale&&(a+="minimum-scale="+this.minScale+", ");!0===this.bUserScalable?a+="user-scalable=yes":!1===this.bUserScalable&&(a+="user-scalable=no");return a};this.update=function(a,b){var d=this;if(d.bSupported){d.updateFailure=b;d.updateSuccess=a;var e=d.width;"device-width"===e&&(e=d.screenWidth);e=d.prevWidth;"device-width"===e?e=d.screenWidth:void 0===
e&&(e=document.documentElement.clientWidth);d.updateMeta();d.updateTimeout=setTimeout(function(){d.updateCheck()},500)}else b()};this.updateCheck=function(){if(void 0!==this.updateTimeout){var a=!1,b=document.documentElement.clientWidth;this.width===b?a=!0:"device-width"===this.width&&this.screenWidth===b&&(a=!0);clearTimeout(this.updateTimeout);this.updateTimeout=void 0;a?(this.prevWidth=this.width,this.updateSuccess(),this.viewportChange()):(this.bSupported=!1,this.updateFailure());this.updateSuccess=
this.updateFailure=void 0}};this.updateMeta=function(){var a=document,b=this.meta;void 0===b?(b=this.meta=a.createElement("meta"),b.setAttribute("name","viewport"),b.setAttribute("content",this.toString()),a.head.appendChild(b)):b.setAttribute("content",this.toString())};this.updateOrientation=function(){var a=window.orientation;this.orientation=a=0===a||180===a?"portrait":90===a||-90===a?"landscape":document.documentElement.clientWidth>document.documentElement.clientHeight?"landscape":"portrait"};
this.updateScale=function(){this.scale=this.screenWidth/window.innerWidth};this.updateScreen=function(){var a=this.screenHeight=screen.height,b=this.screenWidth=screen.width;"portrait"===this.orientation?b>a&&(this.screenHeight=b,this.screenWidth=a):b<a&&(this.screenHeight=b,this.screenWidth=a)};this.viewportChange=function(){var a=document.createEvent("Event");a.initEvent("viewportChange",!0,!0);a.bUserScalable=this.bUserScalable;a.maxScale=this.maxScale;a.minScale=this.minScale;a.width=this.width;
document.dispatchEvent(a)};return!0}var reView;(function(a){reView=new ReView;if(reView.v.bSupported)try{if("sessionStorage"in a&&null!==a.sessionStorage){var b=sessionStorage.getItem("reViewMode");"core"===reView.mode&&"default"===b?reView.setDefault():"default"===reView.mode&&"core"===b&&reView.setCore()}else reView.v.bSupported=!1}catch(d){reView.v.bSupported=!1}})(window);
function ReView(){this.mode="default";this.v=new Viewport;this.v.viewport();this.v.readyPolicy=function(){reView.ready()};this.v.bSupported&&"device-width"===this.v.width&&(this.mode="core");this.failure=function(){var a=reView;a.mode==="default"&&a.v.iWidth!==void 0&&window.location.reload();a.failurePolicy!==void 0&&a.failurePolicy()};this.ready=function(){var a=document.getElementsByClassName("reView"),b=a.length,d=reView;if(d.v.bSupported){for(d.mode==="default"&&sessionStorage.getItem("reViewMode")!==
"core"&&d.success();b--;)a[b].style.display="inline";document.body.addEventListener("click",function(a){if(a.target.hasAttribute("class")&&a.target.getAttribute("class").indexOf("reView")>-1){a.preventDefault();d.mode==="default"?d.setCore():d.mode==="core"&&d.setDefault()}})}else for(screen.width>=1024&&d.success();b--;)a[b].style.display="none"};this.setCore=function(){if(this.mode==="core")this.success();else if(this.v.bSupported){try{sessionStorage.setItem("reViewMode","core")}catch(a){}this.v.setMobile(function(){reView.mode=
"core";reView.success()},reView.failure)}else this.failure()};this.setDefault=function(){if(this.mode==="default")this.success();else if(this.v.bSupported){try{sessionStorage.setItem("reViewMode","default")}catch(a){}this.v.setDefault(function(){reView.mode="default";reView.success()},reView.failure)}else this.failure()};this.success=function(){var a=reView;a.v.bSupported&&a.updateAnchors();a.successPolicy!==void 0&&a.successPolicy()};this.updateAnchors=function(){var a=document.getElementsByClassName("reView"),
b=a.length;if(this.mode==="core")for(;b--;)a[b].innerHTML=a[b].hasAttribute("data-coreText")?a[b].getAttribute("data-coreText"):"Default View";else for(;b--;)a[b].innerHTML=a[b].hasAttribute("data-defaultText")?a[b].getAttribute("data-defaultText"):"Core View"};return!0};
}
(function ($) {
    window.addEventListener("message",

    function (e) {
        if (e.data === "search-focused") {
            $('iframe').css('z-index', 999999);
        }
        if (e.data === "search-blurred") {
            $('iframe').css('z-index', 0);
        }
    },
    false);

})(jQuery);
(function($, TextResizer) {
	/*Prevent a search with no text*/
	$(document).on('click', '.search-button', function (e) {
        var val = $('.search-input').val();

        if (val.length === 0) {
            e.preventDefault();
        }
    });

	/*Toggle hamburger menu*/
    $(document).on('click', '.hamburger-btn', function(e) {
        e.preventDefault();
        $('.primary-nav, .secondary-nav').toggleClass('mobile-menu-visible');
    });

    /*Submit url to rate form*/
    $(document).on('submit', '#RateThisPageForm', function(){ 
        document.getElementById('url').value = window.location.href;
        
        if ($('input#website').val().length) {
            return false;
        } 
    });

    /*Initialize the Text Resizer*/
    $(document).ready(function () {
        var textResizer = new TextResizer({
            listClass: "resizer-list"
        });
    });
})(jQuery, TextResizer);
var baltimoreCounty = baltimoreCounty || {};

baltimoreCounty.contentFilter = (function($) {

    /* Private Properties ******************************************/

    var that = this;
    that.options = {};

    /* Public Methods ******************************************/ 

    /*
     * Initialize the filter, and activate it.
     */
    function init(options) {

        options = options || {};

        that.options.wrapperSelector = options.wrapper || '.bc-filter-content';
        that.options.searchBoxSelector = options.searchBox || '.bc-filter-form .bc-filter-form-filter';
        that.options.clearButtonSelector = options.clearButton || '.bc-filter-form .bc-filter-form-clearButton';
        that.options.errorMessageSelector = options.errorMessage || '.bc-filter-noResults';
        that.options.contentType = options.contentType || 'list';

        that.$wrapper = safeLoad(that.options.wrapperSelector);
        that.$searchBox = safeLoad(that.options.searchBoxSelector);
        that.$clearButton = safeLoad(that.options.clearButtonSelector);
        that.$errorMessage = safeLoad(that.options.errorMessageSelector);
        that.contentType = that.options.contentType;

        that.$errorMessage.hide();

        that.$searchBox.on('keyup', function(eventObject) {
            switch (that.contentType) {
                case 'table':
                    filterTable(that.$wrapper, $(eventObject.currentTarget).val());
                    break;
                case 'list':
                    filterList(that.$wrapper, $(eventObject.currentTarget).val());
                    break;
            }            
        });
        
        that.$searchBox.closest('form').on('submit', function(e) {
            return false;
        });

        $clearButton.on('click', function() {
            clearFilter(that.$wrapper, that.$searchBox);
        });
    }      

    /* Private Methods ******************************************/

    function safeLoad(selector) {
        var $items = $(selector);
        if ($items.length === 0)
            throw 'No elements for "' + selector + '" were found.';
        return $items;
    }

    /*
     * Tokenized search that returns the matches found in the list or table.
     */
    function findMatches($wrapper, selector, criteria) {
        var criteriaTokens = criteria.trim().toLowerCase().split(' '); 

        var $matches = $wrapper.find(selector).filter(function(idx, element) {
            var selectorText = $(element).text().toLowerCase();            
            return criteriaTokens.every(function(tokenValue) {
                return selectorText.indexOf(tokenValue) > -1;
            });
        });

        return $matches;
    }

    /*
     * Filters an unordered list based on the user's input.
     */
    function filterList($wrapper, criteria) {
        var $matches = findMatches($wrapper, 'ul li', criteria);

        $wrapper.find('li').not($matches).hide();
        $matches.show();

        var $divsWithResults = $wrapper.children('div').find('li').not('[style="display: none;"]').closest('div');

        $wrapper.children('div').not($divsWithResults).hide();
        $divsWithResults.show();

        if ($divsWithResults.length === 0) 
            $errorMessage.show();
        else
            $errorMessage.hide();
    }

    /*
     * Since the current table stripes are based on :nth-child(), they'll get funky
     * when the filter removes rows. So, let's reset the row striping when there's a search. 
     * This is using inline styles since there's inline CSS that sets the color and 
     * has to be overwritten.
     */
    function resetTableStripes($matches, selector, color) {
        $matches.parent().children(selector).has('td').css('background-color', color);
    }

    /*
     * Filters an table of links and content based on the user's input.
     */
    function filterTable($wrapper, criteria) {
        var $matches = findMatches($wrapper, 'tr', criteria);

        $wrapper.find('tr').has('td').not($matches).hide();
        $matches.show();

        if ($matches.length === 0) {
            $errorMessage.show();
            $wrapper.find('tr').has('th').hide();
        } else {
            $errorMessage.hide();
            $wrapper.find('tr').has('th').show();
        }

        resetTableStripes($matches, 'tr:visible:even', '#ebebeb');
        resetTableStripes($matches, 'tr:visible:odd', '#fff');
    }

    /*
     * Clears the filter and displays all nodes in the list.
     */
    function clearFilter($wrapper, $searchbox) {
        $wrapper.find('li, div, tr').show();
        $searchbox.val('');
    }

    /* Reveal! */

    return {
        init: init
    };

})(jQuery);

// Collapse the other items
(function($) {

    $(function() {

		var clickedAccordionLevel = 0;

		/* Opens any items that match the current URL, so the user 
		 * sees the current page as being active. 
		 */
		$('.bc-accordion-menu ul li a').each(function(idx, item) {
			var itemHref = item.getAttribute('href');
			if (window.location.href.toLowerCase() === itemHref.toLowerCase()) {
				$(item).addClass('current');
				var $collapsables = $(item).parentsUntil('.bc-accordion-menu', 'ul');
				$collapsables.addClass('in');
				var $siblings = $collapsables.siblings('.accordion-collapsed');
				
				if (!$siblings.hasClass('active'))
					$siblings.addClass('active');
			}      
		}); 

		/* Updates the tracked current accordion level, since Bootstrap Collapse
		 * wasn't exactly designed for nested menus.
		 */
		$('.bc-accordion-menu .panel .accordion-collapsed').on('click', function(e) {
			var $currentTarget = $(e.currentTarget);

			clickedAccordionLevel = getAccordionLevel($currentTarget);
			$currentTarget.attr('aria-expanded', !$currentTarget.attr('aria-expanded'));
		});

		/* Making sure only the active accordion level's "active" css class is cleared when the menu expands. */
		$('.bc-accordion-menu .collapse').on('show.bs.collapse', function() {
			var $collapsable = $(this);
			var $siblings = $collapsable.siblings('.accordion-collapsed');
			var accordionLevel = getAccordionLevel($collapsable);

			if (accordionLevel === clickedAccordionLevel && !$siblings.hasClass('active')) 
				$siblings.addClass('active');

		});

		/* Making sure only the active accordion level's "active" css class is cleared when the menu collapses. */
		$('.bc-accordion-menu .collapse').on('hide.bs.collapse', function() {
			var $collapsable = $(this);
			var $siblings = $collapsable.siblings('.accordion-collapsed');
			var accordionLevel = getAccordionLevel($collapsable);

			if (accordionLevel === clickedAccordionLevel && $siblings.hasClass('active')) 
				$siblings.removeClass('active');
		});
		
		// Hide all text-only nodes.
		$('.bc-accordion-menu .panel ul li').contents().filter(textNodeFilter).parent().css('display','none');

		// Set up the DIVs to expand and collapse their siblings.
		$('.bc-accordion-menu .accordion-collapsed').on('click', function(e) { $(e.target).siblings('.collapse').collapse('toggle'); return false; });

		/* Returns whether this is a parent or child accordion link. */
		function getAccordionLevel($element) {
			return $element.parents('ul').length + 1;
		}

		function textNodeFilter(idx, element) {
			if (element.nodeType === 3 && element.nodeValue.trim() !== '') {
				return true;
			}
		}

    });

})(jQuery);
namespacer('baltimoreCounty');

baltimoreCounty.niftyTables = (function($) {
    'use strict';

    var columnIndex = 0,
        shouldSortAscending = true,

        /*
         * Since we're soring a table, we need to work out what we're 
         * comparing against, based on the column header that was clicked. 
         * Then we can compare the two rows that are passed in.
         */
        clickedColumnSorter = function(a, b) {
            var aContent = getFirstTextFromCell(a, columnIndex),
                bContent = getFirstTextFromCell(b, columnIndex),
                aExtractedContent = extractNumbersIfPresent(aContent),
                bExtractedContent = extractNumbersIfPresent(bContent),
                directionComparer = shouldSortAscending ? ascendingComparer : descendingComparer;
            return comparer(directionComparer, aExtractedContent, bExtractedContent);
        },

        /*
         * Use the supplied comparerFunction to compare a and b.
         */
        comparer = function(comparerFunction, a, b) {
            return comparerFunction(a, b);
        },

        /*
         * Compares two values, and returns a result that incidates whether 
         * or not the values are in ascending order.
         */
        ascendingComparer = function(a, b) {
            if (a > b)
                return 1;

            if (b > a)
                return -1;

            return 0;                
        },

        /*
         * Compares two values, and returns a result that incidates whether 
         * or not the values are in descending order.
         */
        descendingComparer = function(a, b) {
            if (a < b)
                return 1;

            if (b < a)
                return -1;

            return 0;                
        },
        
        /*
         * Finds the content of the first <p> in a cell from the clicked column 
         * of the supplied row. If there's no <p>, returns the raw text of the cell.
         */
        getFirstTextFromCell = function(tableRow, idx) {
            var $cell = $(tableRow).find('td').eq(idx),
                $p = $cell.find('p');

            return $p.length ? $p.text() : $cell.text();
        },

        /*
         * We want to consider the column text to be a number if it starts with a dollar 
         * sign, so let's peek at the first character and see if that's the case.
         * Don't worry, if it's just a normal number, it's handled elsewhere.
         */
        dollarSkipper = function(numberString) {
            var startsWithPeriodOrCurrencyRegex = /\$/;
            return startsWithPeriodOrCurrencyRegex.test(numberString[0]) && numberString.length > 1 ? 1 : 0;
        },

        /*
         * Is the first character of the value in question a number (without the dollar sign, if present)? 
         * If so, return the value as an actual number, rather than a string of numbers.
         */
        extractNumbersIfPresent = function(stringOrNumber) {
            var firstCharacterIndex = dollarSkipper(stringOrNumber),
                stringOrNumberPossiblyWithoutFirstCharacter = stringOrNumber.slice(firstCharacterIndex);                
            return parseFloat(stringOrNumber[firstCharacterIndex]) ? getFirstSetOfNumbersAndRemoveNonDigits(stringOrNumberPossiblyWithoutFirstCharacter) : stringOrNumber;
        },

        /*
         * Here, we're converting the first group of characters to a number, so we can sort 
         * numbers numerically, rather than alphabetically.
         */
        getFirstSetOfNumbersAndRemoveNonDigits = function(numbersAndAssortedOtherCharacters) {
            var allTheDigitsRegex = /^\.{0,1}(\d+[\,\.]{0,1})*\d+/i;
            return parseFloat(numbersAndAssortedOtherCharacters.match(allTheDigitsRegex)[0].split(',').join(''));
        },

        /*
         * Sorts the table based on the column header that was clicked.
         */
        tableSort = function(e) {
            var $clickedLink = $(e.target).closest('a'),                    
                $niftyTable = $clickedLink.closest('table'),
                $tableRows = $niftyTable.find('tr').not(':first-child');

            columnIndex = $clickedLink.closest('th').index();

            shouldSortAscending = !($clickedLink.hasClass('sort-ascending') || $clickedLink.hasClass('sort-descending')) || $clickedLink.hasClass('sort-descending');

            if (shouldSortAscending)
                $clickedLink.removeClass('sort-descending').addClass('sort-ascending');
            else
                $clickedLink.removeClass('sort-ascending').addClass('sort-descending');

            $clickedLink.closest('tr').find('a').not($clickedLink).removeClass('sort-ascending').removeClass('sort-descending');

            $tableRows.detach();
            $tableRows.sort(clickedColumnSorter);                    
            $niftyTable.append($tableRows);
        },        

        /*
         * Build links and attach event handlers.
         */
        init = function() {

            var $niftyTables = $('table.nifty-table'),
                $sortableTables = $('.nifty-table').filter('.nifty-table-sortable'),
                $sortableColumnHeadings = $sortableTables.find('th');
                
            // Create sorting links    
            if ($sortableTables.length) {
                $sortableColumnHeadings.children().wrap('<a href="javascript:;" class="btn-sort" role="button"></a>');
                $sortableColumnHeadings.find('.btn-sort').on('click', tableSort);
            }
        };

    return {
        /* test code */
        clickedColumnSorter : clickedColumnSorter,
        getFirstTextFromCell: getFirstTextFromCell,
        dollarSkipper : dollarSkipper,
        extractNumbersIfPresent: extractNumbersIfPresent,
        getFirstSetOfNumbersAndRemoveNonDigits : getFirstSetOfNumbersAndRemoveNonDigits,
        /* end test code */
        init: init
    };

})(jQuery);

$(document).ready(function() {
    baltimoreCounty.niftyTables.init();
});