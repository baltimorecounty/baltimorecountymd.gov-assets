namespacer("baltimoreCounty.pageSpecific"),baltimoreCounty.pageSpecific.viewerGoogleMaps=function(e,t){var n,o=function(e,t){window.map=new google.maps.Map(document.getElementById(e),t)},a=function(e){var t={map:window.map,position:{lat:1*e.Latitude,lng:1*e.Longitude},animation:google.maps.Animation.DROP};return e.ImageUrl&&(t.icon=e.ImageUrl),e.ZIndex&&(t.zIndex=e.ZIndex,t.optimized=!1),n=new google.maps.Marker(t),e.InfoWindowHtml&&(n.html=e.InfoWindowHtml),n},i=function(){n&&n.setMap(null)},r=function(e,t,n,o){i()},l=function(e,t){r()},u=function(e,t,n){$.ajax("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&key=AIzaSyAqazsw3wPSSxOFVmij32C_LIhBSuyUNi8").done(function(e){var t=d(e.results).replace(", USA","");n(t)})},d=function(e){var t=$.grep(e,c),n=$.grep(e,g);return!!p(n)&&(!(!t||!t.length)&&t[0].formatted_address)},p=function(e){var t="";return e&&e.length&&(t=e[0].formatted_address),t.indexOf("Baltimore County")!==-1},c=function(e,t){return m(e,t,"street_address")},g=function(e,t){return m(e,t,"administrative_area_level_2")},m=function(e,t,n){var o;return e.types&&(o=$.grep(e.types,function(e,t){return e===n})),!!o.length&&o},s=function(e){return'<div class="maps-info-window"><h4><a href="/CitySourced/preview/viewer?reportId='+e.Id+'">'+e.IssueType+"</a></h4><ul><li>Status: "+e.StatusType+"</li><li>Reported on "+e.DateCreated+"</li></ul></div>"};return{initGoogle:function(){var e=baltimoreCounty.pageSpecific.citySourcedData,t=baltimoreCounty.pageSpecific.nearbyData,n=[],i={center:{lat:e.Latitude,lng:e.Longitude},scrollwheel:!1,zoom:14,mapTypeId:"roadmap",mapTypeControl:!1,streetViewControl:!1},r=new google.maps.InfoWindow({content:"holding..."});o("map",i);var l={Latitude:i.center.lat,Longitude:i.center.lng,ImageUrl:"/sebin/n/f/icon-marker-my-report.png",ZIndex:7999};if(a(l),u(i.center.lat,i.center.lng,function(e){$("#address").text(e)}),t)for(var d=0;d<t.length;d++)if(t[d].Latitude!=e.Latitude&&t[d].Longitude!=e.Longitude){var p={Latitude:t[d].Latitude,Longitude:t[d].Longitude,ImageUrl:"/sebin/n/p/icon-marker-other.png",InfoWindowHtml:s(t[d])};n[d]=a(p),google.maps.event.addListener(n[d],"click",function(){r.setContent(this.html),r.open(map,this)})}},centerMapOnLatLng:l}}();