namespacer("baltimoreCounty.pageSpecific"),baltimoreCounty.pageSpecific.viewerGoogleMaps=function(e,n){var t,o="AIzaSyAqazsw3wPSSxOFVmij32C_LIhBSuyUNi8",a="Baltimore County",i=function(e,n){window.map=new google.maps.Map(document.getElementById(e),n)},r=function(e){var n={map:window.map,position:{lat:1*e.Latitude,lng:1*e.Longitude},animation:google.maps.Animation.DROP};return e.ImageUrl&&(n.icon=e.ImageUrl),e.ZIndex&&(n.zIndex=e.ZIndex,n.optimized=!1),t=new google.maps.Marker(n),e.InfoWindowHtml&&(t.html=e.InfoWindowHtml),t},l=function(){t&&t.setMap(null)},p=function(e,n,t,o){l()},d=function(e,n){p(e,n,!1,function(t){if(t){var o=new google.maps.LatLng(e,n);window.map.panTo(o),window.map.setZoom(14),google.maps.event.trigger(window.map,"resize"),map.setCenter(o)}})},u=function(e,n,t){$.ajax("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+n+"&key="+o).done(function(e){var n=g(e.results).replace(", USA","");t(n)})},g=function(e){var n=$.grep(e,c),t=$.grep(e,s);return!!m(t)&&(!(!n||!n.length)&&n[0].formatted_address)},m=function(e){var n="";return e&&e.length&&(n=e[0].formatted_address),n.indexOf(a)!==-1},c=function(e,n){return f(e,n,"street_address")},s=function(e,n){return f(e,n,"administrative_area_level_2")},f=function(e,n,t){var o;return e.types&&(o=$.grep(e.types,function(e,n){return e===t})),!!o.length&&o},w=function(e){var n='<div class="maps-info-window"><h4><a href="/CitySourced/preview/viewer?reportId='+e.Id+'">'+e.IssueType+"</a></h4><ul><li>Status: "+e.StatusType+"</li><li>Reported on "+e.DateCreated+"</li></ul></div>";return n},v=function(){var e=baltimoreCounty.pageSpecific.citySourcedData,n=baltimoreCounty.pageSpecific.nearbyData,t=[],o={center:{lat:e.Latitude,lng:e.Longitude},scrollwheel:!1,zoom:14,mapTypeId:"roadmap",mapTypeControl:!1,streetViewControl:!1},a=new google.maps.InfoWindow({content:"holding..."});i("map",o);var l={Latitude:o.center.lat,Longitude:o.center.lng,ImageUrl:"/sebin/n/f/icon-marker-my-report.png",ZIndex:7999};if(r(l),u(o.center.lat,o.center.lng,function(e){$("#address").text(e)}),n)for(var p=0;p<n.length;p++)if(n[p].Latitude!=e.Latitude&&n[p].Longitude!=e.Longitude){var d={Latitude:n[p].Latitude,Longitude:n[p].Longitude,ImageUrl:"/sebin/n/p/icon-marker-other.png",InfoWindowHtml:w(n[p])};t[p]=r(d),google.maps.event.addListener(t[p],"click",function(){a.setContent(this.html),a.open(map,this)})}};return{initGoogle:v,centerMapOnLatLng:d}}();