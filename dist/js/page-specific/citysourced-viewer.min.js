namespacer("baltimoreCounty.pageSpecific"),baltimoreCounty.pageSpecific.citySourcedViewer=function(e,t,i,o){"use strict";var r=function(t,i){e.ajax("//ba224964:1000/api/citysourced/getreportsbylatlng",{method:"POST",data:t}).done(function(e){i&&i(e)}).fail(function(e){})},a=function(){var i=t.getAsDictionary(),o=i.reportId;o?e.ajax("//testservices.baltimorecountymd.gov/api/citysourced/getreport/"+o).done(function(t,i,o){var a=new Date;a.setDate(-90);var c={Latitude:t.Latitude,Longitude:t.Longitude,StartDate:a.toLocaleDateString("en-US")};baltimoreCounty.pageSpecific.citySourcedData=t,t&&t.IsOpen&&(t.IsOpen=t.IsOpen?"open":"closed");var n=e("#citysourced-viewer-template").html(),p=Handlebars.compile(n),s=p(t),u=e("#citysourced-viewer");r(c,function(t){u.hide(),u.html(s),u.slideDown(300,function(){baltimoreCounty.pageSpecific.nearbyData=t,e("body").append('<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAqazsw3wPSSxOFVmij32C_LIhBSuyUNi8&libraries=places&callback=baltimoreCounty.pageSpecific.viewerGoogleMaps.initGoogle" async defer></script>')})})}).fail(function(t,i,r){e("#reportId").text(o),e(".bc-citysourced-reporter").hide(),e(".bc-citysourced-viewer-alert").slideDown(300)}):(e(".bc-citysourced-reporter").hide(),e(".bc-citysourced-viewer-alert").slideDown(300))};return{init:a}}(jQuery,baltimoreCounty.utility.querystringer,baltimoreCounty.pageSpecific.viewerGoogleMaps),$(function(){baltimoreCounty.pageSpecific.citySourcedViewer.init()});