"use strict";namespacer("baltimoreCounty.pageSpecific"),baltimoreCounty.pageSpecific.searchResults=function(e,t,r,n){baltimoreCounty.constants.keywordSearch.urls.api="https://testservices.baltimorecountymd.gov/api/search/";var i=void 0,a=function(e){var t=e.trim(),r=[];"+"===t[t.length-1]&&(t=t.slice(0,-1));for(var n=t.split("+"),i=0,a=n.length;i<a;i+=1){var o=decodeURIComponent(n[i]).replace(/[?#\\\/]/g," ").replace(/&/g,"and").trim(),u=encodeURIComponent(o);r.push(u)}return r.join("%20")},o=function(t,r){var i=r||1,o=a(t),u=""+n.keywordSearch.urls.api+o+"/"+i;e.ajax(u).then(h,s)},u=function(e){return{highlight:e.Description,title:e.Title,url:e.Url,id:e.Id}},s=function(e){console.error(e)},c=function(e){return e.map(function(e){return u(e)})},l=function(e,t){return Array(e).fill().map(function(e,r){return{page:r+1,current:r+1===t}})},p=function(e){return e.current_page*e.per_page<e.total_result_count?e.current_page*e.per_page:e.total_result_count},g=function(e){return(e.current_page-1)*e.per_page+1},f=function(t){var n=e("#marty").html();return r.compile(n)(t)},h=function(e){var t=e.info.page,r=e.results,n=t.query,a=t.num_pages>10,o=a?10:t.num_pages,u=p(t),s=g(t),h=t.spelling_suggestion?t.spelling_suggestion.text:void 0,m=c(r),d=l(o,t.current_page);t.base_url=window.location.pathname+"?q="+t.query+"&page=",t.index={first:s,last:u};var y={searchResult:m,info:t,pageLinks:d,tooManyResults:a,spellingSuggestion:h,query:n},_=f(y);i.html(_),i.find(".loading").hide(),i.find(".search-results-display").show()};return{init:function(){var r=t.getAsDictionary();i=e(".search-results"),r.q?o(r.q,r.page):i.html("<p>There were no results found for this search.</p>")}}}(jQuery,baltimoreCounty.utility.querystringer,Handlebars,baltimoreCounty.constants),$(function(){baltimoreCounty.pageSpecific.searchResults.init()});