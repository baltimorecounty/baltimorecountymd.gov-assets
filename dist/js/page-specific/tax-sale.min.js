function enableNextButton(){var e={step1:!1,step2:!1,step3:!1,step4:!1};e.step1=$(BcValidation.settings.step1.form.selector).valid(),e.step2=$(BcValidation.settings.step2.form.selector).valid(),e.step3=$(BcValidation.settings.step3.form.selector).valid(),e.step4=$(BcValidation.settings.step4.form.selector).valid(),$("#next, #submit").attr("disabled","disabled");var t=BcValidation.settings;if($(t.step1.form.selector).is(":visible")&&CssEnableNext(e.step1),$(t.step2.form.selector).is(":visible")&&CssEnableNext(e.step2),$(t.step3.form.selector).is(":visible")&&CssEnableNext(e.step3),$(t.step4.form.selector).is(":visible")){CssEnableNext(e.step4)===!0&&$("#submit").removeAttr("disabled")}}function hideButton(e,t){var n="prev"===t?"first":"last",i=$("ul.progress-menu li:"+n+" p").text(),s=$("#"+t);e===i?(s.hide(),"next"===t&&$("#submit").show().attr("disabled","disabled")):s.show()}function getToken(){$.ajax({type:"GET",url:appServer+"Intake/GetToken",contentType:"application/json; charset=utf-8",data:"{}",dataType:"jsonp",jsonpCallback:"updateToken",success:function(e){},error:function(e){alert("Error: "+e.d)}})}function updateToken(e){$("p.tax-sale").html(e)}function fillEmptyRadios(){0===$("input[name=MarylandEntity]:checked").length&&$("input[name=MarylandEntity][value=No]").attr("checked","checked"),0===$("input[name=InGoodStanding]:checked").length&&$("input[name=InGoodStanding][value=No]").attr("checked","checked")}function bindSubmit(){var e;$(document).on("click","#submit",function(){fillEmptyRadios(),e=["token=",$("p.tax-sale").text(),"&"].join(""),$("input[name=BusinessType]").attr("disabled",""),$("div.taxStep form").each(function(){e+=$("input[type!=hidden]",this).serialize()+"&"}),$("input[name=BusinessType]").attr("disabled","disabled"),e+=$("div.taxStep select").serialize(),$("input[type=checkbox]").each(function(){this.checked||(e+="&"+this.name+"=0")}),$.ajax({type:"GET",url:appServer+"Intake/SubmitForm",contentType:"application/json; charset=utf-8",data:e,dataType:"jsonp",jsonpCallback:"SumbitFormResult",success:function(e){},error:function(e){}})})}function SumbitFormResult(e){var t=e.ResponseStatus,n=e.ResponseError,i=resultsPage+"?status="+t;1===t&&(i+="&regId="+n),window.location=i}var form_element_container,prev_text,next_text,isIE8orBelow=document.all&&!document.addEventListener,appServer="http://egov.baltimorecountymd.gov/TaxSale/",resultsPage="http://resources.baltimorecountymd.gov/Confirmations/Confirmationtaxsale.html",validationObj=null,CssEnableNext=function(e){return e===!0?($("#next").removeAttr("disabled"),!0):($("#next").attr("disabled","disabled"),!1)};$(document).ready(function(){$.support.cors=!0,$("hr:last").hide(),BcValidation.init(),getToken(),$("div.taxStep.first div.seform fieldset table:lt(2)").show(),form_element_container=$("div.taxStep"),$(form_element_container).each(function(){$("ul.progress-menu").append("<li><p><span>"+$("legend:first",this).text()+"</span></p></li>")}),$("ul.progress-menu li:first p").addClass("first active bold");var e;$("ul.progress-menu li p:not(.first)").each(function(){e=$("span",this).height(),e>=20&&e<40?$("span",this).css("padding-top","10%"):e>=40&&$("span",this).css("padding-top","8%")}),$(document).on("click","ul.progress-menu li",function(){var e=$("p",this),t=e.text();e.hasClass("active")||e.hasClass("completed")||$("div.taxStep:visible form").valid()?($("#submit").hide(),$(form_element_container).hide(),$("div.taxStep").find("legend:contains("+$(this).text()+")").closest(".taxStep").show(),$("ul.progress-menu li p").removeClass("active"),e.addClass("active"),next_text=t,prev_text=t,hideButton(next_text,"next"),hideButton(prev_text,"prev"),enableNextButton()):alert("Please fill out the required fields")}),$(document).on("click","#next",function(){$(".taxStep form:visible").valid()&&($(".taxStep input:visible:first").focus(),next_text=$("ul.progress-menu li p.active").parent().next().text(),hideButton(next_text,"next"),""!==next_text&&($("ul.progress-menu li p.active").removeClass("active").addClass("completed").parent().next().children("p").addClass("active"),$("ul.progress-menu li p:first").removeClass("bold active").addClass("completed"),$("#prev").show(),$(form_element_container).hide(),$("div.taxStep").find("legend:contains("+next_text+")").closest(".taxStep").fadeIn(function(){})),$("#next").attr("disabled","disabled"))}),$(document).on("click","#prev",function(){prev_text=$("ul.progress-menu li p.active").parent().prev().text(),$("#next").show(),$("#submit").hide(),hideButton(prev_text,"prev"),""!==prev_text&&($("ul.progress-menu li p.active").parent().prev().children("li p").addClass("active"),$("ul.progress-menu li p.active:last").removeClass("active"),$(form_element_container).hide(),$("div.taxStep").find("legend:contains("+prev_text+")").closest(".taxStep").show(),enableNextButton())}),$(document).on("click",'input[name="BusinessType"]',function(){$('input[name="BusinessType"]').attr("disabled","disabled"),$("hr:last").show(),$(".ignore").removeClass("ignore");var e=$(this).closest("form"),t=$(this).val(),n=t&&t.toLowerCase().indexOf("individual")>-1,i=n?e.find("fieldset:eq(2)"):e.find("fieldset:eq(1)");(n?e.find("fieldset:eq(1)"):e.find("fieldset:eq(2)")).find("input").addClass("ignore"),i.show(),e.find("fieldset").last().show()}),$(document).on("click","ul.progress-menu li:last",function(){$("#fieldName1").show()}),$(document).on("click",'div.taxStep:visible input.seRequiredElement[type="radio"], div.taxStep:visible input.seRequiredElement[type="checkbox"]',enableNextButton),isIE8orBelow?($(document).on("focusout","div.taxStep:visible input",enableNextButton),$(document).on("focus","input[name=EmailAddress], input[name=TaxpayerID], input[name=ElectronicSignature]",function(){$("#next").attr("disabled","")})):$(document).on("keyup","div.taxStep:visible input",enableNextButton),bindSubmit()});