function enableNextButton(){var e={step1:!1,step2:!1,step3:!1,step4:!1};e.step1=$(BcValidation.settings.step1.form.selector).valid(),e.step2=$(BcValidation.settings.step2.form.selector).valid(),e.step3=$(BcValidation.settings.step3.form.selector).valid(),e.step4=$(BcValidation.settings.step4.form.selector).valid(),$("#next").attr("disabled","disabled"),$("#submit").attr("disabled","disabled");var t=BcValidation.settings;if($(t.step1.form.selector).is(":visible")&&CssEnableNext(e.step1),$(t.step2.form.selector).is(":visible")&&CssEnableNext(e.step2),$(t.step3.form.selector).is(":visible")&&CssEnableNext(e.step3),$(t.step4.form.selector).is(":visible")){CssEnableNext(e.step4)===!0&&$("#submit").removeAttr("disabled")}}function hideButton(e,t){var i;i="prev"==t?"first":"last",e==$("ul.progress-menu li:"+i+" p").text()?($("#"+t).hide(),"next"==t&&$("#submit").show().attr("disabled","disabled")):$("#"+t).show()}function getToken(){$.ajax({type:"GET",url:appServer+"Intake/GetToken",contentType:"application/json; charset=utf-8",data:"{}",dataType:"jsonp",jsonpCallback:"updateToken",success:function(e){},error:function(e){alert("Error: "+e.d)}})}function updateToken(e){$("p.tax-sale").html(e)}function fillEmptyRadios(){0==$("input[name=MarylandEntity]:checked").length&&$("input[name=MarylandEntity][value=No]").attr("checked","checked"),0==$("input[name=InGoodStanding]:checked").length&&$("input[name=InGoodStanding][value=No]").attr("checked","checked")}function bindSubmit(){var e;$(document).on("click","#submit",function(){fillEmptyRadios(),e="token="+$("p.tax-sale").text()+"&",$("input[name=BusinessType]").attr("disabled",""),$("div.taxStep form").each(function(){e+=$("input[type!=hidden]",this).serialize()+"&"}),$("input[name=BusinessType]").attr("disabled","disabled"),e+=$("div.taxStep select").serialize();$("input[type=checkbox]").each(function(){this.checked||(e+="&"+this.name+"=0")}),$.ajax({type:"GET",url:appServer+"Intake/SubmitForm",contentType:"application/json; charset=utf-8",data:e,dataType:"jsonp",jsonpCallback:"SumbitFormResult",success:function(e){},error:function(e){}})})}function SumbitFormResult(e){var t=e.ResponseStatus,i=e.ResponseError,s=resultsPage+"?status="+t;1==t&&(s+="&regId="+i),window.location=s}var form_element_container,prev_text,next_text,isIE8orBelow=document.all&&!document.addEventListener,appServer="http://egov.baltimorecountymd.gov/TaxSale/",resultsPage="http://resources.baltimorecountymd.gov/Confirmations/Confirmationtaxsale.html",validationObj=null,CssEnableNext=function(e){return e===!0?($("#next").removeAttr("disabled"),!0):($("#next").attr("disabled","disabled"),!1)};$(document).ready(function(){$.support.cors=!0,$("hr:last").hide(),BcValidation.init(),getToken(),$("div.taxStep.first div.seform fieldset table:lt(2)").show(),form_element_container=$("div.taxStep"),$(form_element_container).each(function(){$("ul.progress-menu").append("<li><p><span>"+$("legend:first",this).text()+"</span></p></li>")}),$("ul.progress-menu li:first p").addClass("first active bold");var e;$("ul.progress-menu li p:not(.first)").each(function(){e=$("span",this).height(),e>=20&&e<40?$("span",this).css("padding-top","10%"):e>=40&&$("span",this).css("padding-top","8%")}),$(document).on("click","ul.progress-menu li",function(){$("p",this).hasClass("active")||$("p",this).hasClass("completed")||$("div.taxStep:visible form").valid()?($("#submit").hide(),$(form_element_container).hide(),$("div.taxStep").find("legend:contains("+$(this).text()+")").closest(".taxStep").show(),$("ul.progress-menu li p").removeClass("active"),$("p",this).addClass("active"),next_text=$("p",this).text(),prev_text=$("p",this).text(),hideButton(next_text,"next"),hideButton(prev_text,"prev"),enableNextButton()):alert("Please fill out the required fields")}),$(document).on("click","#next",function(){$(".taxStep form:visible").valid()&&($(".taxStep input:visible:first").focus(),next_text=$("ul.progress-menu li p.active").parent().next().text(),hideButton(next_text,"next"),""!==next_text&&($("ul.progress-menu li p.active").removeClass("active").addClass("completed").parent().next().children("p").addClass("active"),$("ul.progress-menu li p:first").removeClass("bold active").addClass("completed"),$("#prev").show(),$(form_element_container).hide(),$("div.taxStep").find("legend:contains("+next_text+")").closest(".taxStep").fadeIn(function(){})),$("#next").attr("disabled","disabled"))}),$(document).on("click","#prev",function(){prev_text=$("ul.progress-menu li p.active").parent().prev().text(),$("#next").show(),$("#submit").hide(),hideButton(prev_text,"prev"),""!==prev_text&&($("ul.progress-menu li p.active").parent().prev().children("li p").addClass("active"),$("ul.progress-menu li p.active:last").removeClass("active"),$(form_element_container).hide(),$("div.taxStep").find("legend:contains("+prev_text+")").closest(".taxStep").show(),enableNextButton())}),$(document).on("click",'input[name="BusinessType"]',function(){$('input[name="BusinessType"]').attr("disabled","disabled"),$("hr:last").show(),$(".ignore").removeClass("ignore"),$(this).val().indexOf("Individual")>-1?($("div.taxStep.first div.seform fieldset table:not(:lt(2))").hide(),$("div.taxStep.first div.seform fieldset hr:first").prevAll().find("input").addClass("ignore"),$("div.taxStep.first div.seform fieldset hr:first").nextAll().fadeIn("1000",function(){})):($("hr:first").hide(),$("div.taxStep.first div.seform fieldset table:not(:lt(2))").hide(),$("div.taxStep.first div.seform fieldset hr:first").nextAll().find("input").addClass("ignore"),isIE8orBelow?($("div.taxStep.first div.seform fieldset hr:first").prevAll().show(),$("div.taxStep.first div.seform fieldset table:visible table").show()):$("div.taxStep.first div.seform fieldset hr:first").prevAll().fadeIn("1000",function(){$("div.taxStep.first div.seform fieldset table:visible table").show()})),$("div.taxStep.first div.seform fieldset table:last").show()}),$(document).on("click","ul.progress-menu li:last",function(){$("#fieldName1").show()}),$(document).on("click",'div.taxStep:visible input.seRequiredElement[type="radio"], div.taxStep:visible input.seRequiredElement[type="checkbox"]',function(){enableNextButton()}),isIE8orBelow?($(document).on("focusout","div.taxStep:visible input",function(){enableNextButton()}),$(document).on("focus","input[name=EmailAddress], input[name=TaxpayerID], input[name=ElectronicSignature]",function(){$("#next").attr("disabled","")})):$(document).on("keyup","div.taxStep:visible input",function(){enableNextButton()}),bindSubmit()});