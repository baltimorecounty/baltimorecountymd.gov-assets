var jQuery_1_9_1=jQuery_1_9_1||jQuery,BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(t){for(var e=0;e<t.length;e++){var r=t[e].string,i=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,r){if(-1!=r.indexOf(t[e].subString))return t[e].identity}else if(i)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!=e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init(),String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)};var beforePrint=function(){$("body").append($("#swc-results"))},afterPrint=function(){$(".fancybox-inner").append($("#swc-results"))};window.onbeforeprint=beforePrint,window.onafterprint=afterPrint,function(t,e){var r="";r+="<h1 class='title'>Stormwater Remediation Fee Detail</h1>",r+='{{#.}}{{#AccountNumber}}<a class="print-data" href="">',r+='<img src="http://www.baltimorecountymd.gov/sebin/w/w/print-button.gif" width="59" height="20" border="0" alt="Print this page." title="Print this page." />',r+="</a>{{/AccountNumber}}",r+='<div class="property-info">',r+="{{#AccountNumber}}",r+="<h2>Property Information</h2>",r+="<p>",r+="<b>Tax Account Number: </b>{{AccountNumber}}",r+="</p>",r+="<p>",r+="<b>Property Category: </b>{{FeeCategory}}",r+="</p>",r+="</div>",r+="<div class='fee-info'>",r+="<h2>Fee Information</h2>",r+="<p>",r+="<b>Total Impervious Surface Area (ISA): </b>{{#formatNumber}}{{SurfaceArea}}{{/formatNumber}} square feet",r+="</p>",r+="<p>",r+="<b>Less Credits: </b>{{#formatNumber}}{{Credits}}{{/formatNumber}} square feet",r+="</p>",r+="<p>",r+="<b>Total Adjusted Impervious Surface Area: </b> {{#formatNumber}}{{AdjustedImperviousServiceArea}}{{/formatNumber}} square feet",r+="</p>",r+="<p>",r+="<b>Fee Per 2,000 Square Feet: </b>${{FeePer2kSqfoot}}",r+="</p>",r+="{{#AdjustmentsComment}}<p>",r+="<b>Other Adjustments: </b>{{AdjustmentsComment}}",r+="</p>{{/AdjustmentsComment}}",r+="<p>",r+="<b>Total Fee: </b>${{#formatNumber}}{{RemediationFee}}{{/formatNumber}}",r+="</p>",r+="</div>",r+="{{#comments}}",r+="<div class='comments'>",r+="<h2>Comments</h2>",r+="{{#bmpCredits}}<p>",r+="<b>Remediation Credits: </b>",r+="</p>",r+="<ul>",r+="{{#BmpCreditNote1}}<li>{{BmpCreditNote1}}</li>{{/BmpCreditNote1}}",r+="{{#BmpCreditNote2}}<li>{{BmpCreditNote2}}</li>{{/BmpCreditNote2}}",r+="{{#BmpCreditNote3}}<li>{{BmpCreditNote3}}</li>{{/BmpCreditNote3}}",r+="{{#BmpCreditNote4}}<li>{{BmpCreditNote4}}</li>{{/BmpCreditNote4}}",r+="{{#BmpCreditNote5}}<li>{{BmpCreditNote5}}</li>{{/BmpCreditNote5}}",r+="{{#BmpCreditNote6}}<li>{{BmpCreditNote6}}</li>{{/BmpCreditNote6}}",r+="</ul>",r+="{{/bmpCredits}}",r+="{{#CondoCalculationComment}}<p>",r+="<b>About the Condo Calculation: </b>{{CondoCalculationComment}}",r+="</p>{{/CondoCalculationComment}}",r+="</div>",r+="{{/comments}}",r+="<div class='learn-more'>",r+="<h2>Learn More</h2>",r+="<p>",r+='Visit <a href="{{MyNeighborhoodLink}}" class="btn">My Neighborhood</a> to see GIS data for this property.',r+="</p>",r+="<p>",r+='View <a href="{{SDatLink}}" class="btn">Real Property Data</a> from the Maryland Department of Assessment and Taxation.',r+="</p>",r+="</div>",r+="{{/AccountNumber}}",r+="{{^AccountNumber}}",r+="{{> no_results}}",r+="{{/AccountNumber}}",r+="{{/.}}";var i="";i+="<div class='loading-results'>",i+="<h2>Loading...</h2>",i+="</div>";var n="";n+='<div class="no-results">',n+="<h2>{{#no_results_status}}{{no_results_status}}{{/no_results_status}}{{^no_results_status}}Stormwater Remediation Fee information is temporarily unavailable. Please check back in a few minutes.{{/no_results_status}}</h2><h3> Please check the following:</h3>",n+="<ul>",n+="<li>",n+='Make sure your tax account number is entered correctly. If you don’t have your number, you can look it up by property address in Baltimore County’s <a href="http://myneighborhood.baltimorecountymd.gov/" title="Visit Baltimore County\'s My Neighboorhood Application">My Neighborhood</a> application.',n+="</li>",n+="<li>This search tool is for commercial, industrial and institutional properties only. Stormwater fees for residential property are based on a flat rate.</li>",n+="</ul>",n+="</div>";var o={no_results:n},a=function(t){var e={status:"Don't see any results?"},r=Mustache.render(n,e);t.html(r)},s=function(n){var s={maxWidth:"600",minWidth:"600",autoResize:!1,type:"inline"},l={maxWidth:"600",type:"inline"},c=t("#swc-results"),p=BrowserDetect.browser,b=BrowserDetect.version;"Explorer"==p&&b<8?t.fancybox.open("#swc-results",s):t.fancybox.open("#swc-results",l),c.html(i),e.getJSON("http://egov.baltimorecountymd.gov/RainTax/RecordLookup/"+m(n)).done(function(t,e){if("success"===e.toLowerCase()){t.bmpCredits=function(){return u(t)},t.comments=function(){return!(!u(t)&&!this.CondoCalculationComment)||null},t.formatNumber=function(){return function(t,e){return d(e(t))}},t.no_results_status="Your search returned no results.";var i=Mustache.render(r,t,o);c.html(i)}else a(c)}).fail(function(t,e,r){a(c)})},u=function(e){var r=[e.BmpCreditNote1,e.BmpCreditNote2,e.BmpCreditNote3,e.BmpCreditNote4,e.BmpCreditNote5,e.BmpCreditNote6],i=!1;return t.each(r,function(t,e){if(e)return i=!0,!1}),i},d=function(t){for(;/(\d+)(\d{3})/.test(t.toString());)t=t.toString().replace(/(\d+)(\d{3})/,"$1,$2");return t},m=function(t){return t.replaceAll("-","")},l=function(){t("#StormwaterFeeCalculator").on("keypress","#TaxIDNumber",function(e){if(13==e.keyCode){e.preventDefault();var r=t("#TaxIDNumber").val();return s(r),!1}})},c=function(){t("#swc-results").on("click",".print-data",function(t){return t.preventDefault(),beforePrint(),window.print(),afterPrint(),!1})},p=function(){t("#submit_tax").attr("disabled","disabled")},b=function(){t("#StormwaterFeeCalculator").on("click","input[name=submit_tax]",function(e){e.preventDefault();var r=t("#TaxIDNumber").val();s(r)})};t(document).ready(function(){t.support.cors=!0,p(),b(),c(),l()}),t(document).on("keyup","#TaxIDNumber",function(e){var r=t(this),i=t.trim(r.val()).length,n=t("#submit_tax");10===i?n.removeAttr("disabled"):p()})}(jQuery_1_9_1,jQuery);