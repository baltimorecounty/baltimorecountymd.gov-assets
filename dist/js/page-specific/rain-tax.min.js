var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(t){for(var e=0;e<t.length;e++){var r=t[e].string,i=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,r){if(r.indexOf(t[e].subString)!=-1)return t[e].identity}else if(i)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(e!=-1)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init(),String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)};var beforePrint=function(){$("body").append($("#swc-results"))},afterPrint=function(){$(".fancybox-inner").append($("#swc-results"))};window.onbeforeprint=beforePrint,window.onafterprint=afterPrint,function(t,e){var r="http://egov.baltimorecountymd.gov/RainTax/RecordLookup/",i="";i+="<h1 class='title'>Stormwater Remediation Fee Detail</h1>",i+='{{#.}}{{#AccountNumber}}<a class="print-data" href="">',i+='<img src="http://www.baltimorecountymd.gov/sebin/w/w/print-button.gif" width="59" height="20" border="0" alt="Print this page." title="Print this page." />',i+="</a>{{/AccountNumber}}",i+='<div class="property-info">',i+="{{#AccountNumber}}",i+="<h2>Property Information</h2>",i+="<p>",i+="<b>Tax Account Number: </b>{{AccountNumber}}",i+="</p>",i+="<p>",i+="<b>Property Category: </b>{{FeeCategory}}",i+="</p>",i+="</div>",i+="<div class='fee-info'>",i+="<h2>Fee Information</h2>",i+="<p>",i+="<b>Total Impervious Surface Area (ISA): </b>{{#formatNumber}}{{SurfaceArea}}{{/formatNumber}} square feet",i+="</p>",i+="<p>",i+="<b>Less Credits: </b>{{#formatNumber}}{{Credits}}{{/formatNumber}} square feet",i+="</p>",i+="<p>",i+="<b>Total Adjusted Impervious Surface Area: </b> {{#formatNumber}}{{AdjustedImperviousServiceArea}}{{/formatNumber}} square feet",i+="</p>",i+="<p>",i+="<b>Fee Per 2,000 Square Feet: </b>${{FeePer2kSqfoot}}",i+="</p>",i+="{{#AdjustmentsComment}}<p>",i+="<b>Other Adjustments: </b>{{AdjustmentsComment}}",i+="</p>{{/AdjustmentsComment}}",i+="<p>",i+="<b>Total Fee: </b>${{#formatNumber}}{{RemediationFee}}{{/formatNumber}}",i+="</p>",i+="</div>",i+="{{#comments}}",i+="<div class='comments'>",i+="<h2>Comments</h2>",i+="{{#bmpCredits}}<p>",i+="<b>Remediation Credits: </b>",i+="</p>",i+="<ul>",i+="{{#BmpCreditNote1}}<li>{{BmpCreditNote1}}</li>{{/BmpCreditNote1}}",i+="{{#BmpCreditNote2}}<li>{{BmpCreditNote2}}</li>{{/BmpCreditNote2}}",i+="{{#BmpCreditNote3}}<li>{{BmpCreditNote3}}</li>{{/BmpCreditNote3}}",i+="{{#BmpCreditNote4}}<li>{{BmpCreditNote4}}</li>{{/BmpCreditNote4}}",i+="{{#BmpCreditNote5}}<li>{{BmpCreditNote5}}</li>{{/BmpCreditNote5}}",i+="{{#BmpCreditNote6}}<li>{{BmpCreditNote6}}</li>{{/BmpCreditNote6}}",i+="</ul>",i+="{{/bmpCredits}}",i+="{{#CondoCalculationComment}}<p>",i+="<b>About the Condo Calculation: </b>{{CondoCalculationComment}}",i+="</p>{{/CondoCalculationComment}}",i+="</div>",i+="{{/comments}}",i+="<div class='learn-more'>",i+="<h2>Learn More</h2>",i+="<p>",i+='Visit <a href="{{MyNeighborhoodLink}}" class="btn">My Neighborhood</a> to see GIS data for this property.',i+="</p>",i+="<p>",i+='View <a href="{{SDatLink}}" class="btn">Real Property Data</a> from the Maryland Department of Assessment and Taxation.',i+="</p>",i+="</div>",i+="{{/AccountNumber}}",i+="{{^AccountNumber}}",i+="{{> no_results}}",i+="{{/AccountNumber}}",i+="{{/.}}";var n="";n+="<div class='loading-results'>",n+="<h2>Loading...</h2>",n+="</div>";var o="";o+='<div class="no-results">',o+="<h2>{{#no_results_status}}{{no_results_status}}{{/no_results_status}}{{^no_results_status}}Stormwater Remediation Fee information is temporarily unavailable. Please check back in a few minutes.{{/no_results_status}}</h2><h3> Please check the following:</h3>",o+="<ul>",o+="<li>",o+='Make sure your tax account number is entered correctly. If you don’t have your number, you can look it up by property address in Baltimore County’s <a href="http://myneighborhood.baltimorecountymd.gov/" title="Visit Baltimore County\'s My Neighboorhood Application">My Neighborhood</a> application.',o+="</li>",o+="<li>This search tool is for commercial, industrial and institutional properties only. Stormwater fees for residential property are based on a flat rate.</li>",o+="</ul>",o+="</div>";var a={no_results:o},s=function(t){var e={status:"Don't see any results?"},r=Mustache.render(o,e);t.html(r)},u=function(o){var u={maxWidth:"600",minWidth:"600",autoResize:!1,type:"inline"},c={maxWidth:"600",type:"inline"},p=t("#swc-results"),b=BrowserDetect.browser,f=BrowserDetect.version;"Explorer"==b&&f<8?t.fancybox.open("#swc-results",u):t.fancybox.open("#swc-results",c),p.html(n),e.getJSON(r+l(o)).done(function(t,e){if("success"===e.toLowerCase()){t.bmpCredits=function(){return d(t)},t.comments=function(){var e=d(t);return!(!e&&!this.CondoCalculationComment)||null},t.formatNumber=function(){return function(t,e){return m(e(t))}},t.no_results_status="Your search returned no results.";var r=Mustache.render(i,t,a);p.html(r)}else s(p)}).fail(function(t,e,r){s(p)})},d=function(e){var r=[e.BmpCreditNote1,e.BmpCreditNote2,e.BmpCreditNote3,e.BmpCreditNote4,e.BmpCreditNote5,e.BmpCreditNote6],i=!1;return t.each(r,function(t,e){if(e)return i=!0,!1}),i},m=function(t){for(;/(\d+)(\d{3})/.test(t.toString());)t=t.toString().replace(/(\d+)(\d{3})/,"$1,$2");return t},l=function(t){return t.replaceAll("-","")},c=function(){t("#StormwaterFeeCalculator").on("keypress","#TaxIDNumber",function(e){if(13==e.keyCode){e.preventDefault();var r=t("#TaxIDNumber").val();return u(r),!1}})},p=function(){t("#swc-results").on("click",".print-data",function(t){return t.preventDefault(),beforePrint(),window.print(),afterPrint(),!1})},b=function(){t("#submit_tax").attr("disabled","disabled")},f=function(){t("#StormwaterFeeCalculator").on("click","input[name=submit_tax]",function(e){e.preventDefault();var r=t("#TaxIDNumber").val();u(r)})};t(document).ready(function(){t.support.cors=!0,b(),f(),p(),c()}),t(document).on("keyup","#TaxIDNumber",function(e){var r=t(this),i=t.trim(r.val()).length,n=t("#submit_tax");10===i?n.removeAttr("disabled"):b()})}(jQuery_1_9_1,jQuery);